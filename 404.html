<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <script>
        // Single Page Apps for GitHub Pages redirect handling
        // Simplified to prevent redirect loops with malformed paths
        
        var l = window.location;
        var path = l.pathname;
        
        // Extract the base path for GitHub Pages (e.g., /bandplan)
        var pathSegmentsToKeep = 1;
        var basePath = path.split('/').slice(0, 1 + pathSegmentsToKeep).join('/');
        
        // Get the remaining path after base path
        var remainingPath = path.slice(1).split('/').slice(pathSegmentsToKeep).join('/');
        
        // Only process if remainingPath doesn't already contain encoded patterns
        // This prevents redirect loops
        if (remainingPath && !remainingPath.includes('~and~') && !remainingPath.includes('?/')) {
            // Clean the path: remove special characters that could cause loops
            var cleanPath = remainingPath.replace(/[?&]/g, '');
            
            // Validate that the clean path contains only digits (valid frequency)
            if (cleanPath && /^\d+$/.test(cleanPath)) {
                // Redirect to the clean path
                l.replace(
                    l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
                    basePath + '/' + cleanPath + l.hash
                );
            } else {
                // Invalid path - redirect to home
                l.replace(
                    l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
                    basePath + '/'
                );
            }
        } else {
            // Already processed or malformed - redirect to home
            l.replace(
                l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
                basePath + '/'
            );
        }
    </script>
</head>
<body>
</body>
</html>
